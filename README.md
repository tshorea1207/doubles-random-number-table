# ダブルスガチャシミュレータ

テニスサークルのダブルス組み合わせを最適化する Web アプリケーションです。
コート数・参加人数・ラウンド数を指定すると、ペア回数や対戦回数の偏りが最小になる組み合わせ表を自動生成します。

## 主な機能

- **組み合わせ自動生成** — 逐次決定法ベースのアルゴリズムで公平な対戦表を作成
- **固定ペア設定** — 特定のペアを固定（初心者＋経験者、夫婦など）
- **途中参加・離脱** — 試合進行中に参加者を変更し、残りラウンドを再生成
- **ラウンド追加** — 消化済みラウンドを保持したまま追加ラウンドを生成
- **評価指標の表示** — ペア回数・対戦回数・休憩回数の標準偏差をリアルタイム表示
- **統計マトリクス** — プレイヤー間のペア回数・対戦回数をヒートマップ表示
- **音声読み上げ** — 各ラウンドの組み合わせを音声で案内

## 技術スタック

| カテゴリ       | 技術                 |
| -------------- | -------------------- |
| フレームワーク | React 18             |
| 言語           | TypeScript           |
| ビルドツール   | Vite                 |
| UI ライブラリ  | MUI (Material-UI) v6 |
| テスト         | Vitest               |

## セットアップ

```bash
npm install
npm run dev
```

開発サーバーが起動し、ブラウザでアプリにアクセスできます。

## スクリプト一覧

| コマンド          | 説明                             |
| ----------------- | -------------------------------- |
| `npm run dev`     | 開発サーバーを起動               |
| `npm run build`   | プロダクションビルド             |
| `npm run preview` | ビルド結果をローカルでプレビュー |
| `npm run test`    | ユニットテストを実行             |
| `npm run lint`    | ESLint によるコード検査          |

## アルゴリズム概要

1. **正規化** — ペア内・対戦ペア間・コート間の並び順を固定し、探索空間を大幅に削減（例: 2 面 8 人で 40,320 → 315 通り）
2. **逐次決定法** — ランダム選択と制約チェック（バックトラッキング＋スコアリング）により高速にスケジュールを生成
3. **評価関数** — `ev = pairStdDev × W1 + oppoStdDev × W2 + restStdDev × W3`（値が小さいほど公平）

詳細は [CLAUDE.md](CLAUDE.md) を参照してください。

## ライセンス

MIT
